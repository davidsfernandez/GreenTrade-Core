@using GreenTrade.Client.Services
@using Microsoft.AspNetCore.SignalR.Client
@inject MarketDataClientService MarketService

<div class="d-inline-flex align-items-center px-3 py-1 rounded-pill shadow-sm @StatusBg" style="transition: all 0.5s ease;">
    <div class="spinner-grow spinner-grow-sm me-2 @StatusText" role="status" style="width: 8px; height: 8px; display: @(MarketService.State == HubConnectionState.Connected ? "none" : "block")"></div>
    <i class="fas fa-circle me-2 @StatusText" style="font-size: 8px; display: @(MarketService.State == HubConnectionState.Connected ? "block" : "none")"></i>
    <span class="small fw-bold @StatusText">@Label</span>
</div>

@code {
    private string Label => MarketService.State switch
    {
        HubConnectionState.Connected => "Sincronizado",
        HubConnectionState.Connecting => "Conectando...",
        HubConnectionState.Reconnecting => "Reconectando...",
        _ => "Desconectado"
    };

    private string StatusBg => MarketService.State switch
    {
        HubConnectionState.Connected => "bg-success-subtle",
        HubConnectionState.Connecting => "bg-info-subtle",
        HubConnectionState.Reconnecting => "bg-warning-subtle",
        _ => "bg-danger-subtle"
    };

    private string StatusText => MarketService.State switch
    {
        HubConnectionState.Connected => "text-success",
        HubConnectionState.Connecting => "text-info",
        HubConnectionState.Reconnecting => "text-warning",
        _ => "text-danger"
    };
}

<style>
    .bg-success-subtle { background-color: #e8f5e9; }
    .bg-info-subtle { background-color: #e1f5fe; }
    .bg-warning-subtle { background-color: #fff8e1; }
    .bg-danger-subtle { background-color: #ffebee; }
</style>
